---
layout:     post
title:      macOS ä»¥å¤ªåŠæœ¬æœºç§æœ‰é“¾+é’±åŒ…è¿æ¥å…¨æµç¨‹ï¼šè§£å†³ç«¯å£å†²çªä¸ IPC å¯¹æ¥
date:       2025-09-05
header-img: img/post-bg-desk.jpg
catalog: true
---

**å…³é”®è¯**ï¼šmacOSã€ä»¥å¤ªåŠç§æœ‰é“¾ã€Ethereum Walletã€Gethã€genesis.jsonã€ç«¯å£å†²çªã€IPC

---

åœ¨çœŸå®ä¸»ç½‘ **Gas è´¹ç”¨æ¿€å¢** æˆ–ç°ä»£æµ‹è¯•ç½‘æ’é˜Ÿæ‹¥å µçš„å½“ä¸‹è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…æŠŠç›®å…‰æŠ•å‘è‡ªå·±ç”µè„‘çš„ **æœ¬æœºç§æœ‰é“¾**ã€‚ä¸€æ¥æ— éœ€æ’é˜Ÿï¼ŒäºŒæ¥è°ƒè¯•æ™ºèƒ½åˆçº¦é€Ÿåº¦é£å¿«ã€‚æœ¬æ–‡ä»¥ **macOS ä¸ºä¾‹**ï¼Œå¸®ä½  15 åˆ†é’Ÿæ­èµ·ä¸€æ¡ **ä»¥å¤ªåŠç§æœ‰é“¾**ï¼Œå¹¶å½»åº•è§£å†³ **Ethereum Wallet æ— æ³•è¿æ¥æœ¬åœ°ç§æœ‰åº“** çš„é¡½ç–¾ã€‚

## å‰ç½®çŸ¥è¯†ä¸ç¯å¢ƒä¸€è§ˆ

| ç¯å¢ƒ | å»ºè®®ç‰ˆæœ¬ | å¤‡æ³¨ |
|------|----------|------|
| æ“ä½œç³»ç»Ÿ | macOS 10.13 åŠä»¥ä¸Š | ä½ç‰ˆæœ¬äº¦å¯ç”¨ï¼Œä½†æœ¬æ–‡ä»¥ 10.13 ä¸ºä¾‹ |
| Geth | v1.10.x åŠä»¥ä¸Š | è´Ÿè´£é“¾æœ¬èº«çš„ç®¡ç† |
| Ethereum Wallet Mist | v0.93+ | ç›´æ¥ç”¨ GUI çœ‹é’±åŒ…å’Œåˆçº¦ |

### å®‰è£…æ£€æŸ¥è„šæœ¬
ç¡®è®¤æ˜¯å¦å·²ç»å‡†å¤‡å¥½ï¼š

```bash
geth version
ls /Applications/Ethereum\ Wallet.app/Contents/MacOS
```
è‹¥æç¤º `geth: command not found`ï¼ŒğŸ‘‰ [ç‚¹è¿™é‡Œå¿«é€Ÿå®‰è£… Geth ä¸€æ­¥åˆ°ä½ï¼](https://okxdog.com/)

## æ­¥éª¤ 1ï¼šç”Ÿæˆ genesis.json

ç§æœ‰é“¾çš„ç¬¬ä¸€å—ç§¯æœ¨å°±æ˜¯ **åˆ›ä¸–é…ç½®æ–‡ä»¶**ã€‚æ–°å»ºæ–‡ä»¶å¤¹å¹¶åœ¨å…¶ä¸­æ”¾ç½® `genesis.json`ï¼š

```json
{
  "config": {
    "chainId": 15,
    "homesteadBlock": 0,
    "eip155Block": 0,
    "eip158Block": 0
  },
  "coinbase": "0x0000000000000000000000000000000000000000",
  "difficulty": "0x40000",
  "extraData": "",
  "gasLimit": "0xffffffff",
  "nonce": "0x0000000000000042",
  "mixhash": "0x0000000000000000000000000000000000000000000000000000000000000000",
  "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
  "timestamp": "0x00",
  "alloc": {}
}
```
*æ³¨ï¼šå¦‚æœå¼€å‘è€…æƒ³è®©æŸäº›åœ°å€é¢„ç½® ETHï¼Œå¯åœ¨ `alloc` ä¸­è‡ªè¡Œæ·»åŠ è´¦æˆ·ã€‚*

## æ­¥éª¤ 2ï¼šåˆå§‹åŒ–æ•°æ®ç›®å½•

è¿›å…¥åˆšæ‰åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œï¼š

```bash
geth init ./genesis.json --datadir "./chain"
```

æ‰§è¡Œå®Œæ¯•åä¼šåœ¨ `./chain` ä¸‹çœ‹åˆ°ä¸¤ä¸ªå…³é”®ç›®å½•ï¼š`geth` ä¸ `keystore`ï¼Œè¡¨ç¤º **ä»¥å¤ªåŠç§æœ‰é“¾æ•°æ®ç›®å½•** åˆ›å»ºæˆåŠŸã€‚

## æ­¥éª¤ 3ï¼šå¯åŠ¨é“¾èŠ‚ç‚¹

è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ç¡®ä¿èŠ‚ç‚¹è„±ç¦»ä¸»ç½‘ **æŸ¥æ‰¾è¡¨**ï¼š

```bash
geth --datadir "./chain" --nodiscover console 2>>eth_output.log
```

- `--nodiscover`ï¼šç¦æ­¢å»ä¸»ç½‘ä¸å…¶ä»–èŠ‚ç‚¹æ¡æ‰‹ã€‚  
- `2>>eth_output.log`ï¼šæ‰€æœ‰æ—¥å¿—éƒ½å­˜åˆ° `eth_output.log`ï¼Œä¾¿äºæ’é”™ã€‚

æ—¥å¿—å‡ºç°ï¼š

```
Welcome to the Geth JavaScript console!
instance: Geth/v1.10.x...
at block: 0 (Thu Jan 01 1970)
modules:...
```

èŠ‚ç‚¹å¯åŠ¨ **æˆåŠŸ**ã€‚

## æ­¥éª¤ 4ï¼šé’±åŒ…ç«¯å£å†²çªçš„æœ¬æº

è®¸å¤šæ–°æ‰‹åœ¨è¿™ä¸€æ­¥ä¼šå“­ï¼š**Fatal: Error starting protocol stack: listen tcp :30303: bind: address already in use**ã€‚

åŸå› å¹¶ä¸ç¥ç§˜ï¼šGeth å·²å  **P2P 30303** ç«¯å£ï¼Œé’±åŒ…å†æƒ³ç”¨è¿™ä¸ªç«¯å£è‡ªç„¶ã€æ‰“æ¶ã€‘ã€‚è§£å†³æ€è·¯åªéœ€ 30 ç§’ï¼šè®©é’±åŒ…ä¸å·²å¯åŠ¨çš„é“¾ **å…±äº« IPC**ï¼Œå®Œå…¨ä¸è·Ÿç«¯å£å†²çªã€‚

## æ­¥éª¤ 5ï¼šæ‰¾åˆ° IPC åœ°å€

æŸ¥çœ‹æ—¥å¿—ç¬¬ 16 è¡Œå·¦å³ï¼š

```bash
less eth_output.log
```

ç±»ä¼¼å†…å®¹ï¼š

```
IPC endpoint opened: url=/Users/you/project/chain/geth.ipc
```

è®°ä¸‹è¯¥ **å®Œæ•´è·¯å¾„**ï¼Œä¸‹ä¸€æ­¥ä¼šç”¨åˆ°ã€‚

## æ­¥éª¤ 6ï¼šæ‰‹åŠ¨å¯åŠ¨é’±åŒ…å¹¶æŒ‡å‘ IPC

```bash
open /Applications/Ethereum\ Wallet.app
```

ä¼šå†æ¬¡æŠ¥é”™ï¼Ÿä¸æ€•ã€‚æ”¹ç”¨å‘½ä»¤è¡Œå¯åŠ¨æ³•ï¼š

```bash
/Applications/Ethereum\ Wallet.app/Contents/MacOS/Ethereum\ Wallet \
--rpc "ç»å¯¹è·¯å¾„è‡³/geth.ipc"
```

ä¾‹å¦‚ï¼š

```bash
/Applications/Ethereum\ Wallet.app/Contents/MacOS/Ethereum\ Wallet \
--rpc /Users/you/project/chain/geth.ipc
```

é’±åŒ… â†’ å³ä¸Šè§’è½ â†’ ç½‘ç»œå›¾æ ‡ â†’ å°†ä¸»ç½‘åˆ‡æ¢åˆ° **Private-net**ã€‚ä½™é¢ã€äº¤æ˜“è®°å½•ç«‹åˆ»åˆ·æ–°ï¼Œç§æœ‰é“¾+é’±åŒ… **å®Œç¾æ¡æ‰‹**ï¼

---

## FAQï¼šå¸¸è§è¸©å‘ 1 åˆ†é’Ÿè§£

**Q1ï¼šGeth å‡çº§åå‘½ä»¤å¤±æ•ˆï¼Ÿ**  
Aï¼šç¬¬ä¸€æ—¶é—´è¿è¡Œ `brew upgrade ethereum` æˆ–äºŒè¿›åˆ¶è¦†ç›–å®‰è£…å³å¯ã€‚

**Q2ï¼šå¦‚ä½•åŠ å¿«å‡ºå—ï¼Ÿ**  
Aï¼šåœ¨åŒä¸€æ§åˆ¶å°æ‰§è¡Œ `miner.start(1)`ï¼Œ10 ç§’å†…å¯è§æ–°å—ç”Ÿæˆã€‚

**Q3ï¼šé’±åŒ…æ‰“å¼€åç©ºç™½ï¼Ÿ**  
Aï¼šç¡®è®¤ IPC è·¯å¾„æ²¡æœ‰ç©ºæ ¼æˆ–ä¸­æ–‡ç¬¦å·ï¼›Mac è·¯å¾„ç”¨å¤§å†™çš„ `/Users/...` ä¸è¦ç”¨å°å†™ `/users/...`ã€‚

**Q4ï¼šèƒ½å¦ç”¨ VS Code è°ƒè¯•æ™ºèƒ½åˆçº¦ï¼Ÿ**  
Aï¼šå¯åœ¨æœ¬æœºå¯åŠ¨ `truffle` æˆ– `hardhat`ï¼ŒæŠŠç½‘ç»œ `url` æŒ‡å‘åŒä¸€ä¸ª IPC æˆ– 8545 RPC ç«¯å£ï¼Œæ‰€æœ‰è°ƒè¯•å‡æœ¬åœ°å®Œæˆã€‚

**Q5ï¼šæœ‰å¤šæ¡ç§æœ‰é“¾æƒ³åˆ‡æ¢ï¼Ÿ**  
Aï¼šå»ºç«‹ä¸åŒæ–‡ä»¶å¤¹å¦‚ `chain1` `chain2`ï¼Œåˆ©ç”¨ `geth attach ipc:~/chain2/geth.ipc` å³å¯è½»æ¾åˆ‡æ¢èŠ‚ç‚¹ã€‚

**Q6ï¼šå¦‚ä½•å¤‡ä»½é“¾ï¼Ÿ**  
Aï¼šç›´æ¥æ‰“åŒ… `chain/geth/chaindata`ã€`keystore` å³å¯ï¼Œå‹ç¼©åä½“ç§¯ä»¥ MB è®¡ï¼Œè¿ç§»è¶…æ–¹ä¾¿ã€‚

---

## è¿›é˜¶å½©è›‹ï¼šä¸€é”®æŒ–çŸ¿è„šæœ¬

æµ‹è¯• DApp æ—¶å¸¸æƒ³è®©é’±åŒ…é‡Œæœ‰å‡ ä¸ª **Mock ETH**ï¼ŒæŠŠä»¥ä¸‹è„šæœ¬ä¿å­˜ä¸º `mine.sh`ï¼Œèµ‹æƒåæ‰§è¡Œï¼š

```bash
#!/bin/bash
echo eth.accounts
echo "å³å°†å¼€å§‹æŒ–çŸ¿ 60 ç§’"
geth attach ipc:/Users/you/project/chain/geth.ipc \
  --exec "miner.start(1); admin.sleepBlocks(10); miner.stop(); eth.getBalance(eth.accounts[0])"
```
è„šæœ¬åœåæŸ¥çœ‹ä½™é¢å³å¯è½»æ¾ **50 eth** åˆ°è´¦ã€‚

---

## å°ç»“ï¼šä¸‰æ­¥ç‰¢è®°ä¸æ‰å‘

1. ç”¨ `geth init` è·‘é€šåˆ›ä¸–æ–‡ä»¶ä¸æ•°æ®ç›®å½•ã€‚  
2. `nodiscover` å¯åŠ¨èŠ‚ç‚¹å¹¶è®°å½• IPC è·¯å¾„ã€‚  
3. æ‰‹åŠ¨å¯åŠ¨ **Ethereum Wallet** å¹¶æŒ‡å‘åŒä¸€ä¸ª IPCï¼Œé¿å¼€ 30303 ç«¯å£å†²çªã€‚

åªè¦è®°ä½è¿™ä¸‰æ­¥ï¼Œä»¥ååœ¨ä»»ä½• macOS ä¸Šæ­å»º **ä»¥å¤ªåŠç§æœ‰é“¾** éƒ½æ˜¯ 10 åˆ†é’Ÿä»¥å†…æå®šã€‚ç«‹å³åŠ¨æ‰‹ï¼Œä½ çš„ä¸‹ä¸€æ¬¾ DApp çš„ç§æœ‰æµ‹è¯•ç½‘å°±åœ¨æ‰‹è¾¹ï¼